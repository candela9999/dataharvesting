<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5 What you need to know about regular expressions | Data Harvesting with R</title>
<meta name="author" content="Jorge Cimentada">
<meta name="description" content="Before I set out to write this chapter I was hesitant to do it. I don’t consider myself an expert on regular expressions nor do I think I would be able to take you from beginner to expert on such...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="5 What you need to know about regular expressions | Data Harvesting with R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://cimentadaj.github.io/dataharvesting/what-you-need-to-know-about-regular-expressions.html">
<meta property="og:description" content="Before I set out to write this chapter I was hesitant to do it. I don’t consider myself an expert on regular expressions nor do I think I would be able to take you from beginner to expert on such...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 What you need to know about regular expressions | Data Harvesting with R">
<meta name="twitter:description" content="Before I set out to write this chapter I was hesitant to do it. I don’t consider myself an expert on regular expressions nor do I think I would be able to take you from beginner to expert on such...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Lato-0.4.1/font.css" rel="stylesheet">
<link href="libs/_Roboto%20Mono-0.4.1/font.css" rel="stylesheet">
<link href="libs/_Montserrat-0.4.1/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet">
<script src="libs/str_view-binding-1.4.0/str_view.js"></script><link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
<script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
   ga('create', 'UA-99618359-1', 'auto');
   ga('send', 'pageview');
  
  </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h2>
        <a href="index.html" title="">Data Harvesting with R</a>
      </h2>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Welcome</a></li>
<li><a class="" href="introduction-to-webscraping.html"><span class="header-section-number">2</span> Introduction to Webscraping</a></li>
<li><a class="" href="a-primer-on-webscraping.html"><span class="header-section-number">3</span> A primer on Webscraping</a></li>
<li><a class="" href="data-formats-for-webscraping.html"><span class="header-section-number">4</span> Data Formats for Webscraping</a></li>
<li><a class="active" href="what-you-need-to-know-about-regular-expressions.html"><span class="header-section-number">5</span> What you need to know about regular expressions</a></li>
<li><a class="" href="what-you-need-to-know-about-xpath.html"><span class="header-section-number">6</span> What you need to know about XPath</a></li>
<li><a class="" href="case-study-scraping-spanish-school-locations-from-the-web.html"><span class="header-section-number">7</span> Case study: scraping Spanish school locations from the web</a></li>
<li><a class="" href="automating-web-scraping-scripts.html"><span class="header-section-number">8</span> Automating Web Scraping Scripts</a></li>
<li><a class="" href="scraping-javascript-based-website.html"><span class="header-section-number">9</span> Scraping JavaScript based website</a></li>
<li><a class="" href="ethical-issues-in-web-scraping.html"><span class="header-section-number">10</span> Ethical issues in Web Scraping</a></li>
<li><a class="" href="introduction-to-rest-apis.html"><span class="header-section-number">11</span> Introduction to REST APIs</a></li>
<li><a class="" href="introduction-to-json.html"><span class="header-section-number">12</span> Introduction to JSON</a></li>
<li><a class="" href="a-primer-on-apis.html"><span class="header-section-number">13</span> A primer on APIs</a></li>
<li><a class="" href="what-is-a-restful-api.html"><span class="header-section-number">14</span> What is a RESTful API?</a></li>
<li><a class="" href="authentication-in-apis.html"><span class="header-section-number">15</span> Authentication in APIs</a></li>
<li><a class="" href="case-study-grabbing-data-from-a-public-api.html"><span class="header-section-number">16</span> Case Study: grabbing data from a public API</a></li>
<li><a class="" href="why-automation-is-important.html"><span class="header-section-number">17</span> Why automation is important</a></li>
<li><a class="" href="automating-data-collectiong-programs.html"><span class="header-section-number">18</span> Automating data collectiong programs</a></li>
<li><a class="" href="insightful-and-robust-data-collection-progams.html"><span class="header-section-number">19</span> Insightful and robust data collection progams</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/cimentadaj/dataharvesting/tree/main/book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="what-you-need-to-know-about-regular-expressions" class="section level1">
<h1>
<span class="header-section-number">5</span> What you need to know about regular expressions<a class="anchor" aria-label="anchor" href="#what-you-need-to-know-about-regular-expressions"><i class="fas fa-link"></i></a>
</h1>
<p>Before I set out to write this chapter I was hesitant to do it. I don’t consider myself an expert on regular expressions nor do I think I would be able to take you from beginner to expert on such a complicated topic. On top of that, there are dozens of excelent tutorial on regular expressions out there that would do the topic more justice that I would be able to. With that said, you cannot do web scraping without knowing <em>some</em> regular expression techniques. Most of the data you’ll extract from the web will need some type of massaging. Other times you’ll find the data you need as a string, joined with other stuff. You’ll need to know that there are tools to clean this string and extract just what you need.</p>
<p>For that reason, I decided I wanted to write this chapter but focusing only on what I think are the key things to know in regex with respect to web scraping. This means that I’ll give you a very incomplete picture of what regex can do but enough to get you up and running in a very short of amount of time. If the reader is interested in the topic (as I am), I refer the reader to the chapter on <a href="https://r4ds.had.co.nz/strings.html">strings</a> from the book R For Data Science. That chapter will give you a more thorough introduction into the topic with more general applications. Without further adue, let’s begin.</p>
<div id="matching-strings" class="section level2">
<h2>
<span class="header-section-number">5.1</span> Matching strings<a class="anchor" aria-label="anchor" href="#matching-strings"><i class="fas fa-link"></i></a>
</h2>
<p>Throughout this chapter we’ll use exclusively the <code>stringr</code> package. That package will cover all of your string manipulation needs. Let’s load it:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org">stringr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">scrapex</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://rvest.tidyverse.org/">rvest</a></span><span class="op">)</span></code></pre></div>
<p>Regular expressions (regex from now on) are a way for you to find patterns within strings. If you find the pattern, you can extract it or replace it in the original string. Let’s take a famous quote by Jorge Luis Borges and find all the “a” letters in the quote:</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">borges</span> <span class="op">&lt;-</span> <span class="st">"I like hourglasses, maps, eighteenth century  typography."</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"eighteenth"</span>, match <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-f8dd34bf306e34edf3e0" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-f8dd34bf306e34edf3e0">{"x":{"html":"<ul>\n  <li>I like hourglasses, maps, <span class='match'>eighteenth<\/span> century  typography.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><p>That’s one of the simplest regex I can think of. That’s a regular expression right there: you’re matching only the word “eighteenth”. <code>stringr</code> has two functions which will be at the backbone of using regex in R: <code>str_replace_all</code> and <code>str_extract_all</code>. The first one will replace a string with another string. For example:</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"eighteenth"</span>, <span class="st">"[DATE]"</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "I like hourglasses, maps, [DATE] century  typography."</code></pre>
<p>In webscraping you’ll need to replace a lot of thing</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"."</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-c446cbb11241354227f5" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-c446cbb11241354227f5">{"x":{"html":"<ul>\n  <li><span class='match'>I<\/span><span class='match'> <\/span><span class='match'>l<\/span><span class='match'>i<\/span><span class='match'>k<\/span><span class='match'>e<\/span><span class='match'> <\/span><span class='match'>h<\/span><span class='match'>o<\/span><span class='match'>u<\/span><span class='match'>r<\/span><span class='match'>g<\/span><span class='match'>l<\/span><span class='match'>a<\/span><span class='match'>s<\/span><span class='match'>s<\/span><span class='match'>e<\/span><span class='match'>s<\/span><span class='match'>,<\/span><span class='match'> <\/span><span class='match'>m<\/span><span class='match'>a<\/span><span class='match'>p<\/span><span class='match'>s<\/span><span class='match'>,<\/span><span class='match'> <\/span><span class='match'>e<\/span><span class='match'>i<\/span><span class='match'>g<\/span><span class='match'>h<\/span><span class='match'>t<\/span><span class='match'>e<\/span><span class='match'>e<\/span><span class='match'>n<\/span><span class='match'>t<\/span><span class='match'>h<\/span><span class='match'> <\/span><span class='match'>c<\/span><span class='match'>e<\/span><span class='match'>n<\/span><span class='match'>t<\/span><span class='match'>u<\/span><span class='match'>r<\/span><span class='match'>y<\/span><span class='match'> <\/span><span class='match'> <\/span><span class='match'>t<\/span><span class='match'>y<\/span><span class='match'>p<\/span><span class='match'>o<\/span><span class='match'>g<\/span><span class='match'>r<\/span><span class='match'>a<\/span><span class='match'>p<\/span><span class='match'>h<\/span><span class='match'>y<\/span><span class='match'>.<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"\\."</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-5a4925fdbe538e3447b6" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-5a4925fdbe538e3447b6">{"x":{"html":"<ul>\n  <li>I like hourglasses, maps, eighteenth century  typography<span class='match'>.<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"maps, . century"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-468595905d8f79ca9a2f" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-468595905d8f79ca9a2f">{"x":{"html":"<ul>\n  <li>I like hourglasses, maps, eighteenth century  typography.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"maps, .+ century"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-9b4957a82a889191a4c1" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-9b4957a82a889191a4c1">{"x":{"html":"<ul>\n  <li>I like hourglasses, <span class='match'>maps, eighteenth century<\/span>  typography.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html">str_extract_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"maps, .+ century"</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="va">res</span> <span class="op"><a href="https://stringr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="st">"maps, | century"</span>, <span class="st">""</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "eighteenth"</code></pre>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">" "</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-b1be106e8b759ea556fa" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-b1be106e8b759ea556fa">{"x":{"html":"<ul>\n  <li>I<span class='match'> <\/span>like<span class='match'> <\/span>hourglasses,<span class='match'> <\/span>maps,<span class='match'> <\/span>eighteenth<span class='match'> <\/span>century<span class='match'> <\/span><span class='match'> <\/span>typography.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">","</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-9415350eace556ea22e6" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-9415350eace556ea22e6">{"x":{"html":"<ul>\n  <li>I like hourglasses<span class='match'>,<\/span> maps<span class='match'>,<\/span> eighteenth century  typography.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"a|e|i"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-7010588e8174bcc54f12" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-7010588e8174bcc54f12">{"x":{"html":"<ul>\n  <li>I l<span class='match'>i<\/span>k<span class='match'>e<\/span> hourgl<span class='match'>a<\/span>ss<span class='match'>e<\/span>s, m<span class='match'>a<\/span>ps, <span class='match'>e<\/span><span class='match'>i<\/span>ght<span class='match'>e<\/span><span class='match'>e<\/span>nth c<span class='match'>e<\/span>ntury  typogr<span class='match'>a<\/span>phy.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/case.html">str_to_lower</a></span><span class="op">(</span><span class="va">borges</span><span class="op">)</span>, <span class="st">"i"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-c4a1f3adb776b43089e2" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-c4a1f3adb776b43089e2">{"x":{"html":"<ul>\n  <li><span class='match'>i<\/span> l<span class='match'>i<\/span>ke hourglasses, maps, e<span class='match'>i<\/span>ghteenth century  typography.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">borges</span>, <span class="st">"I[ ]"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-566beef538d1f6edc796" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-566beef538d1f6edc796">{"x":{"html":"<ul>\n  <li><span class='match'>I <\/span>like hourglasses, maps, eighteenth century  typography.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">retirement</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_html</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/scrapex/man/retirement_age_europe_ex.html">retirement_age_europe_ex</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://stringr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rvest.tidyverse.org/reference/html_table.html">html_table</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://stringr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">.</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">retirement</span><span class="op">$</span><span class="va">Men</span>, <span class="st">"[:digit:]"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-9a977ce8c193e988586c" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-9a977ce8c193e988586c">{"x":{"html":"<ul>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>2<\/span>.<span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>4<\/span> (and <span class='match'>4<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>3<\/span> (and <span class='match'>4<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>7<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>3<\/span> (and <span class='match'>9<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>2<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span> (and <span class='match'>7<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>7<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>7<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>6<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>7<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>3<\/span> (and <span class='match'>6<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>3<\/span> (and <span class='match'>1<\/span><span class='match'>0<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>2<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>3<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>6<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>6<\/span> (and <span class='match'>4<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>4<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>7<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>6<\/span> (and <span class='match'>4<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>0<\/span> (and <span class='match'>5<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>2<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span> (and <span class='match'>3<\/span> months)<\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>5<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>2<\/span><\/li>\n  <li><span class='match'>6<\/span><span class='match'>6<\/span><\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">retirement</span><span class="op">$</span><span class="va">Men</span>, <span class="st">"\\s$"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-06235408145d076f8883" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-06235408145d076f8883">{"x":{"html":"<ul>\n  <li>65<\/li>\n  <li>65<\/li>\n  <li>62.5<\/li>\n  <li>65<\/li>\n  <li>65<\/li>\n  <li>64 (and 4 months)<\/li>\n  <li>65<\/li>\n  <li>65<\/li>\n  <li>63 (and 4 months)<\/li>\n  <li>67<\/li>\n  <li>63 (and 9 months)<\/li>\n  <li>65<\/li>\n  <li>62<\/li>\n  <li>65 (and 7 months)<\/li>\n  <li>67<\/li>\n  <li>65<\/li>\n  <li>67<\/li>\n  <li>66<\/li>\n  <li>67<\/li>\n  <li>63 (and 6 months)<\/li>\n  <li>65<\/li>\n  <li>63 (and 10 months)<\/li>\n  <li>65<\/li>\n  <li>62<\/li>\n  <li>63<\/li>\n  <li>66<\/li>\n  <li>66 (and 4 months)<\/li>\n  <li>64<\/li>\n  <li>67<\/li>\n  <li>65<\/li>\n  <li>66 (and 4 months)<\/li>\n  <li>65<\/li>\n  <li>60 (and 5 months)<\/li>\n  <li>65<\/li>\n  <li>62<\/li>\n  <li>65<\/li>\n  <li>65 (and 3 months)<\/li>\n  <li>65<\/li>\n  <li>65<\/li>\n  <li>62<\/li>\n  <li>66<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">retirement</span><span class="op">$</span><span class="va">Men</span>, <span class="st">"\\s.+$"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-084c97773198c98de988" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-084c97773198c98de988">{"x":{"html":"<ul>\n  <li>65<\/li>\n  <li>65<\/li>\n  <li>62.5<\/li>\n  <li>65<\/li>\n  <li>65<\/li>\n  <li>64<span class='match'> (and 4 months)<\/span><\/li>\n  <li>65<\/li>\n  <li>65<\/li>\n  <li>63<span class='match'> (and 4 months)<\/span><\/li>\n  <li>67<\/li>\n  <li>63<span class='match'> (and 9 months)<\/span><\/li>\n  <li>65<\/li>\n  <li>62<\/li>\n  <li>65<span class='match'> (and 7 months)<\/span><\/li>\n  <li>67<\/li>\n  <li>65<\/li>\n  <li>67<\/li>\n  <li>66<\/li>\n  <li>67<\/li>\n  <li>63<span class='match'> (and 6 months)<\/span><\/li>\n  <li>65<\/li>\n  <li>63<span class='match'> (and 10 months)<\/span><\/li>\n  <li>65<\/li>\n  <li>62<\/li>\n  <li>63<\/li>\n  <li>66<\/li>\n  <li>66<span class='match'> (and 4 months)<\/span><\/li>\n  <li>64<\/li>\n  <li>67<\/li>\n  <li>65<\/li>\n  <li>66<span class='match'> (and 4 months)<\/span><\/li>\n  <li>65<\/li>\n  <li>60<span class='match'> (and 5 months)<\/span><\/li>\n  <li>65<\/li>\n  <li>62<\/li>\n  <li>65<\/li>\n  <li>65<span class='match'> (and 3 months)<\/span><\/li>\n  <li>65<\/li>\n  <li>65<\/li>\n  <li>62<\/li>\n  <li>66<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="va">retirement</span><span class="op">$</span><span class="va">Men</span>, <span class="st">"\\s.+$"</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] 65.0 65.0 62.5 65.0 65.0 64.0 65.0 65.0 63.0 67.0 63.0 65.0 62.0 65.0 67.0
## [16] 65.0 67.0 66.0 67.0 63.0 65.0 63.0 65.0 62.0 63.0 66.0 66.0 64.0 67.0 65.0
## [31] 66.0 65.0 60.0 65.0 62.0 65.0 65.0 65.0 65.0 62.0 66.0</code></pre>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">retirement</span><span class="op">$</span><span class="va">Notes</span>, <span class="st">"gradually.+[:digit:]{2,2} years"</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-494d5083d35306902cf5" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-494d5083d35306902cf5">{"x":{"html":"<ul>\n  <li><\/li>\n  <li>In Austria the retirement age for women is to be equalized to the retirement age for men (65) by 2033.[2]<\/li>\n  <li>By 2022, the age will be 63 for men and 58 for women.[4]<\/li>\n  <li>In Belgium the retirement age is to be increased <span class='match'>gradually to 67 years<\/span> by 2030.[2]<\/li>\n  <li><\/li>\n  <li>In Bulgaria the retirement age for women is to be equalized to the retirement age for men (65) by 2037.<\/li>\n  <li>By 2038 there will be an equal age for women and men set at 67. (Women's age will reach 65 in 2030 and 67 in 2038).[2]<\/li>\n  <li><\/li>\n  <li>In the Czech Republic, in the year 2015, men had the retirement age of 62 years and 10 months and women had it between 58 and 62, depending on number of children.[6][7] In Czech Republic, the retirement age is in the process of being increased, and therefore depends on year of birth (for individuals born after 1977 it may exceed even 67. e.g. a person born in year 1995 must be at least 70 years old.[8]) For women the retirement age depends on the number of raised children as well.[9] For people born in 1975, the retirement age will be the same (66y8m) regardless of sex and number of children raised; and this age will reach 67 for people born in 1977.<\/li>\n  <li>In Denmark, the retirement age will be increased <span class='match'>gradually to reach 67 years<\/span> by 2022. From 2030 onwards, it will be increased a maximum of one year every five years depending on increases in average lifespan.[10][11] See also: Pensions in Denmark.<\/li>\n  <li>In Estonia the retirement age is to be increased <span class='match'>gradually to 65 years<\/span> by 2026.[12] After 2026 it will be linked to the average life expectancy.<\/li>\n  <li><\/li>\n  <li><\/li>\n  <li>In Germany the retirement age is to be increased <span class='match'>gradually and reach 67 years<\/span> by 2029. See also: Pensions in Germany.<\/li>\n  <li><\/li>\n  <li>Women with 40 years of insurance can retire at any age.[2]<\/li>\n  <li><\/li>\n  <li>In Ireland the retirement age is to be increased <span class='match'>gradually and reach 68 years<\/span> by 2028.[2]<\/li>\n  <li>Must have paid contributions for at least 20 years.\nThose who have paid contributions for at least 38 years can retire at 62.\nThose who have paid contributions for at least 41 years and 10 months (women) or 42 years and 10 months (men) can retire regardless of age.<\/li>\n  <li>The age will be 65 by 2025.[2]<\/li>\n  <li><\/li>\n  <li>In Lithuania, the retirement age will be 65 for both men and women by 2026.[2]<\/li>\n  <li><\/li>\n  <li>In Malta the retirement age is to be increased <span class='match'>gradually to 65 years<\/span> by 2027.[2]<\/li>\n  <li>Retirement age for women is increasing every 6 months until it reaches 63 years in 2028.<\/li>\n  <li><\/li>\n  <li>In the Netherlands the retirement age is 68 years old. The state pension for all elderly is to be increased <span class='match'>gradually to reach 67 years<\/span> and 9 months by 2022.[15] After 2022 it will be linked to the average life expectancy.<\/li>\n  <li><\/li>\n  <li>See also: Pensions in Norway\nThe general retirement age is currently set to age 67, however, given sufficient pension contributions it is possible to retire as early as at age 62. The longer an individual postpones withdrawing a pension, the greater the government pension provision becomes.<\/li>\n  <li><\/li>\n  <li><\/li>\n  <li>The age for women is being increased gradually. It will reach 63 by 2030.[18]<\/li>\n  <li>The age is to be increased <span class='match'>gradually to 65 years for men and 60 years<\/span> for women by 2028<\/li>\n  <li>By the year of 2032 retirement age for women will equalize with men and reach 65.\nAlso it is possible to gain pension after 45 years of labor of that happen prior to 65th year of life for men or 61st and 6 months for women. It would be at least at age of 60 for both men and women, considering the fact that person is legally labor eligible from the age of 15 in Serbia.[22]<\/li>\n  <li><\/li>\n  <li><\/li>\n  <li>The age will be 67 by 2027.[2] See also: Pensions in Spain.<\/li>\n  <li>By 2023 the retirement age will be 66 and by 2026 it will be 67, with options age 64-69.<\/li>\n  <li><\/li>\n  <li><\/li>\n  <li>The retirement age is due to be increased to 67 by 2028 and 68 by 2046. See also: Pensions in the United Kingdom.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">regex</span> <span class="op">&lt;-</span> <span class="va">gradually</span> <span class="op">&lt;-</span> <span class="st">"(gradually|reach).+[:digit:]{2,2} years"</span>
<span class="fu"><a href="https://stringr.tidyverse.org/reference/str_view.html">str_view_all</a></span><span class="op">(</span><span class="va">retirement</span><span class="op">$</span><span class="va">Notes</span>, <span class="va">regex</span><span class="op">)</span></code></pre></div>
<div id="htmlwidget-4186e2dfc91e550b7ee3" style="width:960px;height:100%;" class="str_view html-widget"></div>
<script type="application/json" data-for="htmlwidget-4186e2dfc91e550b7ee3">{"x":{"html":"<ul>\n  <li><\/li>\n  <li>In Austria the retirement age for women is to be equalized to the retirement age for men (65) by 2033.[2]<\/li>\n  <li>By 2022, the age will be 63 for men and 58 for women.[4]<\/li>\n  <li>In Belgium the retirement age is to be increased <span class='match'>gradually to 67 years<\/span> by 2030.[2]<\/li>\n  <li><\/li>\n  <li>In Bulgaria the retirement age for women is to be equalized to the retirement age for men (65) by 2037.<\/li>\n  <li>By 2038 there will be an equal age for women and men set at 67. (Women's age will reach 65 in 2030 and 67 in 2038).[2]<\/li>\n  <li><\/li>\n  <li>In the Czech Republic, in the year 2015, men had the retirement age of 62 years and 10 months and women had it between 58 and 62, depending on number of children.[6][7] In Czech Republic, the retirement age is in the process of being increased, and therefore depends on year of birth (for individuals born after 1977 it may exceed even 67. e.g. a person born in year 1995 must be at least 70 years old.[8]) For women the retirement age depends on the number of raised children as well.[9] For people born in 1975, the retirement age will be the same (66y8m) regardless of sex and number of children raised; and this age will reach 67 for people born in 1977.<\/li>\n  <li>In Denmark, the retirement age will be increased <span class='match'>gradually to reach 67 years<\/span> by 2022. From 2030 onwards, it will be increased a maximum of one year every five years depending on increases in average lifespan.[10][11] See also: Pensions in Denmark.<\/li>\n  <li>In Estonia the retirement age is to be increased <span class='match'>gradually to 65 years<\/span> by 2026.[12] After 2026 it will be linked to the average life expectancy.<\/li>\n  <li><\/li>\n  <li><\/li>\n  <li>In Germany the retirement age is to be increased <span class='match'>gradually and reach 67 years<\/span> by 2029. See also: Pensions in Germany.<\/li>\n  <li><\/li>\n  <li>Women with 40 years of insurance can retire at any age.[2]<\/li>\n  <li><\/li>\n  <li>In Ireland the retirement age is to be increased <span class='match'>gradually and reach 68 years<\/span> by 2028.[2]<\/li>\n  <li>Must have paid contributions for at least 20 years.\nThose who have paid contributions for at least 38 years can retire at 62.\nThose who have paid contributions for at least 41 years and 10 months (women) or 42 years and 10 months (men) can retire regardless of age.<\/li>\n  <li>The age will be 65 by 2025.[2]<\/li>\n  <li><\/li>\n  <li>In Lithuania, the retirement age will be 65 for both men and women by 2026.[2]<\/li>\n  <li><\/li>\n  <li>In Malta the retirement age is to be increased <span class='match'>gradually to 65 years<\/span> by 2027.[2]<\/li>\n  <li>Retirement age for women is increasing every 6 months until it <span class='match'>reaches 63 years<\/span> in 2028.<\/li>\n  <li><\/li>\n  <li>In the Netherlands the retirement age is 68 years old. The state pension for all elderly is to be increased <span class='match'>gradually to reach 67 years<\/span> and 9 months by 2022.[15] After 2022 it will be linked to the average life expectancy.<\/li>\n  <li><\/li>\n  <li>See also: Pensions in Norway\nThe general retirement age is currently set to age 67, however, given sufficient pension contributions it is possible to retire as early as at age 62. The longer an individual postpones withdrawing a pension, the greater the government pension provision becomes.<\/li>\n  <li><\/li>\n  <li><\/li>\n  <li>The age for women is being increased gradually. It will reach 63 by 2030.[18]<\/li>\n  <li>The age is to be increased <span class='match'>gradually to 65 years for men and 60 years<\/span> for women by 2028<\/li>\n  <li>By the year of 2032 retirement age for women will equalize with men and reach 65.\nAlso it is possible to gain pension after 45 years of labor of that happen prior to 65th year of life for men or 61st and 6 months for women. It would be at least at age of 60 for both men and women, considering the fact that person is legally labor eligible from the age of 15 in Serbia.[22]<\/li>\n  <li><\/li>\n  <li><\/li>\n  <li>The age will be 67 by 2027.[2] See also: Pensions in Spain.<\/li>\n  <li>By 2023 the retirement age will be 66 and by 2026 it will be 67, with options age 64-69.<\/li>\n  <li><\/li>\n  <li><\/li>\n  <li>The retirement age is due to be increased to 67 by 2028 and 68 by 2046. See also: Pensions in the United Kingdom.<\/li>\n<\/ul>"},"evals":[],"jsHooks":[]}</script><ul>
<li>The <code>.</code>, the <code>+</code>, the <code>^</code> and <code>$</code>
</li>
<li>The <code>\\.</code> and other characters such as <code>[</code>.</li>
</ul>
</div>
<div id="exercises-2" class="section level2">
<h2>
<span class="header-section-number">5.2</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-2"><i class="fas fa-link"></i></a>
</h2>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="data-formats-for-webscraping.html"><span class="header-section-number">4</span> Data Formats for Webscraping</a></div>
<div class="next"><a href="what-you-need-to-know-about-xpath.html"><span class="header-section-number">6</span> What you need to know about XPath</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#what-you-need-to-know-about-regular-expressions"><span class="header-section-number">5</span> What you need to know about regular expressions</a></li>
<li><a class="nav-link" href="#matching-strings"><span class="header-section-number">5.1</span> Matching strings</a></li>
<li><a class="nav-link" href="#exercises-2"><span class="header-section-number">5.2</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/cimentadaj/dataharvesting/tree/main/book/blob/main/04-regex.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/cimentadaj/dataharvesting/tree/main/book/edit/main/04-regex.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Harvesting with R</strong>" was written by Jorge Cimentada. It was last built on 2022-10-18.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
