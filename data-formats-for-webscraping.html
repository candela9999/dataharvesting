<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>4 Data Formats for Webscraping | Data Harvesting with R</title>
<meta name="author" content="Jorge Cimentada">
<meta name="description" content="Most of the webscraping that you’ll be doing involves parsing data either on XML or HTML formats. These two formats are very much alike and in fact for many of our examples you’ll notice that they...">
<meta name="generator" content="bookdown 0.26 with bs4_book()">
<meta property="og:title" content="4 Data Formats for Webscraping | Data Harvesting with R">
<meta property="og:type" content="book">
<meta property="og:url" content="https://cimentadaj.github.io/dataharvesting/data-formats-for-webscraping.html">
<meta property="og:description" content="Most of the webscraping that you’ll be doing involves parsing data either on XML or HTML formats. These two formats are very much alike and in fact for many of our examples you’ll notice that they...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="4 Data Formats for Webscraping | Data Harvesting with R">
<meta name="twitter:description" content="Most of the webscraping that you’ll be doing involves parsing data either on XML or HTML formats. These two formats are very much alike and in fact for many of our examples you’ll notice that they...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Lato-0.4.1/font.css" rel="stylesheet">
<link href="libs/_Roboto%20Mono-0.4.1/font.css" rel="stylesheet">
<link href="libs/_Montserrat-0.4.1/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
<script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
   ga('create', 'UA-99618359-1', 'auto');
   ga('send', 'pageview');
  
  </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h2>
        <a href="index.html" title="">Data Harvesting with R</a>
      </h2>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> Introduction</a></li>
<li><a class="" href="introduction-to-webscraping.html"><span class="header-section-number">2</span> Introduction to Webscraping</a></li>
<li><a class="" href="a-primer-on-webscraping.html"><span class="header-section-number">3</span> A primer on Webscraping</a></li>
<li><a class="active" href="data-formats-for-webscraping.html"><span class="header-section-number">4</span> Data Formats for Webscraping</a></li>
<li><a class="" href="what-they-never-taught-you-about-regular-expressions.html"><span class="header-section-number">5</span> What they never taught you about regular expressions</a></li>
<li><a class="" href="what-they-never-taught-you-about-xpath.html"><span class="header-section-number">6</span> What they never taught you about XPath</a></li>
<li><a class="" href="case-study-scraping-spanish-school-locations-from-the-web.html"><span class="header-section-number">7</span> Case study: scraping Spanish school locations from the web</a></li>
<li><a class="" href="automating-web-scraping-scripts.html"><span class="header-section-number">8</span> Automating Web scraping scripts</a></li>
<li><a class="" href="scraping-javascript-based-website.html"><span class="header-section-number">9</span> Scraping JavaScript based website</a></li>
<li><a class="" href="ethical-issues-in-web-scraping.html"><span class="header-section-number">10</span> Ethical issues in Web Scraping</a></li>
<li><a class="" href="introduction-to-rest-apis.html"><span class="header-section-number">11</span> Introduction to REST APIs</a></li>
<li><a class="" href="introduction-to-json.html"><span class="header-section-number">12</span> Introduction to JSON</a></li>
<li><a class="" href="a-primer-on-apis.html"><span class="header-section-number">13</span> A primer on APIs</a></li>
<li><a class="" href="what-is-a-restful-api.html"><span class="header-section-number">14</span> What is a RESTful API?</a></li>
<li><a class="" href="authentication-in-apis.html"><span class="header-section-number">15</span> Authentication in APIs</a></li>
<li><a class="" href="case-study-grabbing-data-from-a-public-api.html"><span class="header-section-number">16</span> Case Study: grabbing data from a public API</a></li>
<li><a class="" href="why-automation-is-important.html"><span class="header-section-number">17</span> Why automation is important</a></li>
<li><a class="" href="automating-data-collectiong-programs.html"><span class="header-section-number">18</span> Automating data collectiong programs</a></li>
<li><a class="" href="insightful-and-robust-data-collection-progams.html"><span class="header-section-number">19</span> Insightful and robust data collection progams</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/cimentadaj/dataharvesting/tree/main/book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-formats-for-webscraping" class="section level1">
<h1>
<span class="header-section-number">4</span> Data Formats for Webscraping<a class="anchor" aria-label="anchor" href="#data-formats-for-webscraping"><i class="fas fa-link"></i></a>
</h1>
<p>Most of the webscraping that you’ll be doing involves parsing data either on XML or HTML formats. These two formats are very much alike and in fact for many of our examples you’ll notice that they are almost indistinguishable. Here’s a very brief definition of what these formats are: a series of tags that formats how a website is structured (HTML) or how you store and transfer data. That sounds rather vague so let’s directly jump into some examples.</p>
<div id="xml" class="section level2">
<h2>
<span class="header-section-number">4.1</span> XML<a class="anchor" aria-label="anchor" href="#xml"><i class="fas fa-link"></i></a>
</h2>
<p>XML is abbreviation for Extensible Markup Language whereas HTML stands for Hypertext Markup Language. In either case, you’ll be able to parse these formats with the <code>xml2</code> package in R. Let’s load that:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://xml2.r-lib.org/">xml2</a></span><span class="op">)</span></code></pre></div>
<p>Let’s begin with a simple example. Below we define an XML string and look at its structure:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">xml_test</span> <span class="op">&lt;-</span> <span class="st">"&lt;people&gt;
&lt;jason&gt;
  &lt;person type='fictional'&gt;
    &lt;first_name&gt;
      &lt;married&gt;
        Jason
      &lt;/married&gt;
    &lt;/first_name&gt;
    &lt;last_name&gt;
        Bourne
    &lt;/last_name&gt;
    &lt;occupation&gt;
      Spy
    &lt;/occupation&gt;
  &lt;/person&gt;
&lt;/jason&gt;
&lt;carol&gt;
  &lt;person type='real'&gt;
    &lt;first_name&gt;
      &lt;married&gt;
        Carol
      &lt;/married&gt;
    &lt;/first_name&gt;
    &lt;last_name&gt;
        Kalp
    &lt;/last_name&gt;
    &lt;occupation&gt;
      Scientist
    &lt;/occupation&gt;
  &lt;/person&gt;
&lt;/carol&gt;
&lt;/people&gt;
"</span>

<span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="va">xml_test</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;people&gt;
## &lt;jason&gt;
##   &lt;person type='fictional'&gt;
##     &lt;first_name&gt;
##       &lt;married&gt;
##         Jason
##       &lt;/married&gt;
##     &lt;/first_name&gt;
##     &lt;last_name&gt;
##         Bourne
##     &lt;/last_name&gt;
##     &lt;occupation&gt;
##       Spy
##     &lt;/occupation&gt;
##   &lt;/person&gt;
## &lt;/jason&gt;
## &lt;carol&gt;
##   &lt;person type='real'&gt;
##     &lt;first_name&gt;
##       &lt;married&gt;
##         Carol
##       &lt;/married&gt;
##     &lt;/first_name&gt;
##     &lt;last_name&gt;
##         Kalp
##     &lt;/last_name&gt;
##     &lt;occupation&gt;
##       Scientist
##     &lt;/occupation&gt;
##   &lt;/person&gt;
## &lt;/carol&gt;
## &lt;/people&gt;</code></pre>
<p>In XML and HTML the basic building blocks are called tags. For example, the first tag in the structure shown above is <code>&lt;people&gt;</code>. This tag is matched by <code>&lt;/people&gt;</code> at the end of the string:</p>
<div class="inline-figure"><img src="images/data_formats/examples/xml_one.png" width="30%" style="display: block; margin: auto;"></div>
<p>If you pay close attention, you’ll see that <strong>each</strong> tag in the XML structure has a beginning (signaled by <code>&lt;&gt;</code>) and an end (signaled by <code>&lt;/&gt;</code>). For example, the next tag after <code>&lt;people&gt;</code> is <code>&lt;jason&gt;</code> and right before the tag <code>&lt;carol&gt;</code> is the end of the jason tag <code>&lt;/jason&gt;</code>.</p>
<div class="inline-figure"><img src="images/data_formats/examples/xml_two.png" width="30%" style="display: block; margin: auto;"></div>
<p>Similarly, you’ll find that the <code>&lt;carol&gt;</code> tag is also matched by a <code>&lt;/carol&gt;</code> finishing tag.</p>
<div class="inline-figure"><img src="images/data_formats/examples/xml_three.png" width="30%" style="display: block; margin: auto;"></div>
<p>In theory, tags can have whatever meaning you attach to them (such as <code>&lt;people&gt;</code> or <code>&lt;occupation&gt;</code>). However, in practice there are hundreds of tags which are standard in websites (for example, <a href="https://www.w3schools.com/tags/">here</a>). If you’re just getting started, there’s no need for you to learn them but as you progress in web scraping, you’ll start to recognize them (one brief example is <code>&lt;strong&gt;</code> which simply <strong>bolds</strong> text in a website).</p>
<p>One key difference between XML and HTML is that some HTML tags don’t need to be closed, meaning they don’t need a <code>&lt;\ &gt;</code> tag. The <code>\</code> signals that this is the closing tag. XML is very strict about this and you’ll find that all tags have an equivalent closing tag.</p>
<p>In R you can read <code>XML</code> and <code>HTML</code> formats with the <code>read_xml</code> and <code>read_html</code> functions. Let’s read in the XML data from our fake example and look at its general structure:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">xml_raw</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/read_xml.html">read_xml</a></span><span class="op">(</span><span class="va">xml_test</span><span class="op">)</span>
<span class="fu"><a href="http://xml2.r-lib.org/reference/xml_structure.html">xml_structure</a></span><span class="op">(</span><span class="va">xml_raw</span><span class="op">)</span></code></pre></div>
<pre><code>## &lt;people&gt;
##   &lt;jason&gt;
##     &lt;person [type]&gt;
##       &lt;first_name&gt;
##         &lt;married&gt;
##           {text}
##       &lt;last_name&gt;
##         {text}
##       &lt;occupation&gt;
##         {text}
##   &lt;carol&gt;
##     &lt;person [type]&gt;
##       &lt;first_name&gt;
##         &lt;married&gt;
##           {text}
##       &lt;last_name&gt;
##         {text}
##       &lt;occupation&gt;
##         {text}</code></pre>
<p>You can see that the structure is tree-based, meaning that tags such as <code>&lt;jason&gt;</code> and <code>&lt;carol&gt;</code> are nested within the <code>&lt;people&gt;</code> tag. In XML jargon, <code>&lt;people&gt;</code> is the <strong>root node</strong>, whereas <code>&lt;jason&gt;</code> and <code>&lt;carol&gt;</code> are the <strong>child nodes</strong> from <code>&lt;people&gt;</code>.</p>
<p>In more detail, the structure is as follows:</p>
<ul>
<li>The <strong>root</strong> node is <code>&lt;people&gt;</code>
</li>
<li>The <strong>child</strong> nodes are <code>&lt;jason&gt;</code> and <code>&lt;carol&gt;</code>
</li>
<li>Then each <strong>child</strong> node has nodes <code>&lt;first_name&gt;</code>, <code>&lt;married&gt;</code>, <code>&lt;last_name&gt;</code> and <code>&lt;occupation&gt;</code> nested within them.</li>
</ul>
<p>Put another way, if something is nested within a <strong>node</strong>, then the nested node is a <strong>child</strong> of the upper-level node. In our example, the <strong>root</strong> node is <code>&lt;people&gt;</code> so we can check which are its children:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># xml_child returns only one child (specified in search)</span>
<span class="co"># Here, jason is the first child</span>
<span class="fu"><a href="http://xml2.r-lib.org/reference/xml_children.html">xml_child</a></span><span class="op">(</span><span class="va">xml_raw</span>, search <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></code></pre></div>
<pre><code>## {xml_node}
## &lt;jason&gt;
## [1] &lt;person type="fictional"&gt;\n  &lt;first_name&gt;\n    &lt;married&gt;\n        Jason\n ...</code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Here, carol is the second child</span>
<span class="fu"><a href="http://xml2.r-lib.org/reference/xml_children.html">xml_child</a></span><span class="op">(</span><span class="va">xml_raw</span>, search <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<pre><code>## {xml_node}
## &lt;carol&gt;
## [1] &lt;person type="real"&gt;\n  &lt;first_name&gt;\n    &lt;married&gt;\n        Carol\n      ...</code></pre>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Use xml_children to extract **all** children</span>
<span class="va">child_xml</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_children.html">xml_children</a></span><span class="op">(</span><span class="va">xml_raw</span><span class="op">)</span>

<span class="va">child_xml</span></code></pre></div>
<pre><code>## {xml_nodeset (2)}
## [1] &lt;jason&gt;\n  &lt;person type="fictional"&gt;\n    &lt;first_name&gt;\n      &lt;married&gt;\n ...
## [2] &lt;carol&gt;\n  &lt;person type="real"&gt;\n    &lt;first_name&gt;\n      &lt;married&gt;\n      ...</code></pre>
<p>Tags can also have different attributes which are usually specified as <code>&lt;fake_tag attribute='fake'&gt;</code> and ended as usual with <code>&lt;/fake_tag&gt;</code>. If you look at the XML structure of our example, you’ll notice that each <code>&lt;person&gt;</code> tag has an attribute called <code>type</code>. As you’ll see in our real-world example, extracting these attributes is often the aim of our scraping adventure. Using <code>xml2</code>, we can extract all attributes that match a specific name with <code>xml_attrs</code>.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Extract the attribute type from all nodes</span>
<span class="fu"><a href="http://xml2.r-lib.org/reference/xml_attr.html">xml_attrs</a></span><span class="op">(</span><span class="va">child_xml</span>, <span class="st">"type"</span><span class="op">)</span></code></pre></div>
<pre><code>## [[1]]
## named character(0)
## 
## [[2]]
## named character(0)</code></pre>
<p>Wait, why didn’t this work? Well, if you look at the output of <code>child_xml</code>, we have two nodes on which are for <code>&lt;jason&gt;</code> and <code>&lt;carol&gt;</code>.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">child_xml</span></code></pre></div>
<pre><code>## {xml_nodeset (2)}
## [1] &lt;jason&gt;\n  &lt;person type="fictional"&gt;\n    &lt;first_name&gt;\n      &lt;married&gt;\n ...
## [2] &lt;carol&gt;\n  &lt;person type="real"&gt;\n    &lt;first_name&gt;\n      &lt;married&gt;\n      ...</code></pre>
<p>Do these tags have an attribute? No, because if they did, they would have something like <code>&lt;jason type='fake_tag'&gt;</code>. What we need is to look down at the <code>&lt;person&gt;</code> tag within <code>&lt;jason&gt;</code> and <code>&lt;carol&gt;</code> and extract the attribute from <code>&lt;person&gt;</code>.</p>
<p>Does this sound familiar? Both <code>&lt;jason&gt;</code> and <code>&lt;carol&gt;</code> have an associated <code>&lt;person&gt;</code> tag below them, making them their children. We can just go down one level by running <code>xml_children</code> on these tags and extract them.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We go down one level of children</span>
<span class="va">person_nodes</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://xml2.r-lib.org/reference/xml_children.html">xml_children</a></span><span class="op">(</span><span class="va">child_xml</span><span class="op">)</span>

<span class="co"># &lt;person&gt; is now the main node, so we can extract attributes</span>
<span class="va">person_nodes</span></code></pre></div>
<pre><code>## {xml_nodeset (2)}
## [1] &lt;person type="fictional"&gt;\n  &lt;first_name&gt;\n    &lt;married&gt;\n        Jason\n ...
## [2] &lt;person type="real"&gt;\n  &lt;first_name&gt;\n    &lt;married&gt;\n        Carol\n      ...</code></pre>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Both type attributes</span>
<span class="fu"><a href="http://xml2.r-lib.org/reference/xml_attr.html">xml_attrs</a></span><span class="op">(</span><span class="va">person_nodes</span>, <span class="st">"type"</span><span class="op">)</span></code></pre></div>
<pre><code>## [[1]]
##        type 
## "fictional" 
## 
## [[2]]
##   type 
## "real"</code></pre>
<p>Using the <code>xml_path</code> function you can even find the ‘address’ of these nodes to retrieve specific tags without having to write down <code>xml_children</code> many times. For example:</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Specific address of each person tag for the whole xml tree</span>
<span class="co"># only using the `person_nodes`</span>
<span class="fu"><a href="http://xml2.r-lib.org/reference/xml_path.html">xml_path</a></span><span class="op">(</span><span class="va">person_nodes</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "/people/jason/person" "/people/carol/person"</code></pre>
<p>We have the ‘address’ of specific tags in the tree but how do we extract them automatically? To extract specific ‘addresses’ of this XML tree, the main function we’ll use is <code>xml_find_all</code>. This function accepts the XML tree and an ‘address’ string. We can use very simple strings, such as the one given by <code>xml_path</code>:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># You can use results from xml_path like directories</span>
<span class="fu"><a href="http://xml2.r-lib.org/reference/xml_find_all.html">xml_find_all</a></span><span class="op">(</span><span class="va">xml_raw</span>, <span class="st">"/people/jason/person"</span><span class="op">)</span></code></pre></div>
<pre><code>## {xml_nodeset (1)}
## [1] &lt;person type="fictional"&gt;\n  &lt;first_name&gt;\n    &lt;married&gt;\n        Jason\n ...</code></pre>
<p>The expression above is asking for the node <code>"/people/jason/person"</code>. This will return the same as saying <code>xml_raw %&gt;% xml_child(search = 1)</code>. For deeply nested trees, <code>xml_find_all</code> will be many times much cleaner than calling <code>xml_child</code> recursively many times.</p>
<p>However, in most cases the ‘addresses’ used in <code>xml_find_all</code> come from a separate language called XPath (in fact, the ‘address’ we’ve been looking at <strong>is</strong> XPath). XPath is a complex language (such as regular expressions for strings) which will be covered in a separate tutorial.</p>
<p>Another property you’ll find in XML is that each tag can have properties. For example, we can see that both <code>&lt;jason&gt;</code> and <code>&lt;carol&gt;</code> have a <code>type</code> property in the <code>&lt;person&gt;</code> tag. These properties are all around XML’s and they often contain handy information that we want to extract. Some tags might have many properties, for example like this:</p>
<pre><code>&lt;name&gt;
&lt;person age="23" status="married" occupation="teacher"&gt; John Doe &lt;/person&gt;
&lt;/name&gt;</code></pre>
<p>XML’s can also have tags repeated many times, so for example, you might have a generic <code>&lt;person&gt;</code> tag that is used for each person in your database:</p>
<pre><code>&lt;name&gt;
&lt;person age="23" status="married" occupation="teacher"&gt; John Doe &lt;/person&gt;
&lt;person age="25" status="single" occupation="doctor"&gt; Jane Doe &lt;/person&gt;
&lt;/name&gt;</code></pre>
<p>Whenever you encounter a website you want to scrape, you’ll need to figure out if it’s an XML or HTML website. How do you do that? The first node of the web structure usually signals what type of document it is. For example, here’s an excerpt of an XML document:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb50-1"><a href="data-formats-for-webscraping.html#cb50-1"></a><span class="kw">&lt;?xml</span> version="1.0&gt;</span>
<span id="cb50-2"><a href="data-formats-for-webscraping.html#cb50-2"></a>&lt;company&gt;</span>
<span id="cb50-3"><a href="data-formats-for-webscraping.html#cb50-3"></a>    &lt;name&gt; John Doe &lt;/name&gt; </span>
<span id="cb50-4"><a href="data-formats-for-webscraping.html#cb50-4"></a>    &lt;email&gt; johndoe@gmail.com &lt;/email&gt;</span>
<span id="cb50-5"><a href="data-formats-for-webscraping.html#cb50-5"></a>&lt;/address&gt;</span></code></pre></div>
<p>The header node tells you that this is an XML document.</p>
</div>
<div id="html" class="section level2">
<h2>
<span class="header-section-number">4.2</span> HTML<a class="anchor" aria-label="anchor" href="#html"><i class="fas fa-link"></i></a>
</h2>
<p>HTML is very similar to XML. Here is an example for comparison:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb51-1"><a href="data-formats-for-webscraping.html#cb51-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb51-2"><a href="data-formats-for-webscraping.html#cb51-2"></a><span class="kw">&lt;html&gt;</span></span>
<span id="cb51-3"><a href="data-formats-for-webscraping.html#cb51-3"></a><span class="kw">&lt;head&gt;</span></span>
<span id="cb51-4"><a href="data-formats-for-webscraping.html#cb51-4"></a><span class="kw">&lt;title&gt;</span>Page Title<span class="kw">&lt;/title&gt;</span></span>
<span id="cb51-5"><a href="data-formats-for-webscraping.html#cb51-5"></a><span class="kw">&lt;/head&gt;</span></span>
<span id="cb51-6"><a href="data-formats-for-webscraping.html#cb51-6"></a><span class="kw">&lt;body&gt;</span></span>
<span id="cb51-7"><a href="data-formats-for-webscraping.html#cb51-7"></a></span>
<span id="cb51-8"><a href="data-formats-for-webscraping.html#cb51-8"></a><span class="kw">&lt;h1&gt;</span> <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">"www.google.com"</span><span class="kw">&gt;</span>This is a Heading <span class="kw">&lt;/a&gt;</span> <span class="kw">&lt;/h1&gt;</span></span>
<span id="cb51-9"><a href="data-formats-for-webscraping.html#cb51-9"></a><span class="kw">&lt;br&gt;</span></span>
<span id="cb51-10"><a href="data-formats-for-webscraping.html#cb51-10"></a><span class="kw">&lt;p&gt;</span>This is a paragraph.<span class="kw">&lt;/p&gt;</span></span>
<span id="cb51-11"><a href="data-formats-for-webscraping.html#cb51-11"></a></span>
<span id="cb51-12"><a href="data-formats-for-webscraping.html#cb51-12"></a><span class="kw">&lt;/body&gt;</span></span>
<span id="cb51-13"><a href="data-formats-for-webscraping.html#cb51-13"></a><span class="kw">&lt;/html&gt;</span></span></code></pre></div>
<p>Some of the similarities include:</p>
<ul>
<li>It’s tag based, meaning everything is surrounded with tags</li>
<li>Tags can have properties as well (<code>href</code> here)</li>
<li>Most tags need to end (<code>&lt;/ &gt;</code>)</li>
<li>The root node signals what type of document it is (here HTML)</li>
</ul>
<p>However, not everything is the same. One key difference is that in this example there is one tag (<code>&lt;br&gt;</code>) that does not have a closing tag (<code>&lt;/br&gt;</code>). This happens sometimes in HTML. There is another key difference which is not evident from this example: for HTML there are hundreds of standard tags such as <code>&lt;head&gt;</code>, <code>&lt;body&gt;</code> or <code>&lt;p&gt;</code>. These tags have special meaning, standard for HTML, that formats how the data is presented in a website. For example, if we rendered the previous HTML chunk:</p>
<div class="inline-figure"><img src="images/data_formats/examples/html_ex1.png" style="display: block; margin: auto;"></div>
<p><strong>This is a heading</strong> contains a hyperlink (<code>&lt;a&gt;</code> tag with the <code>href</code> propertiy), is bigger and is in bold in comparison to “This is a paragraph”. Why dot these tags have such properties? This is because tags in HTML have specific meaning on how to format a website. Remember how I told you that HTML serves to <strong>structure</strong> information and XML to transfer data? HTML tags have specific meanings that a browser knows how to present. In contrast, XML allows you to create endless tags which have your own personal meaning, all in a hierarchical structure.</p>
<p>For a comprehensive list of all HTML tags and what they do, you can check out this <a href="https://www.w3schools.com/tags/default.asp">list</a>. For XML there isn’t a list like this because XML doesn’t have standard tags, users create their own tags which have their own meaning: remember, XML simply transfers data, tags are not for rendering so they don’t have any special meaning other than what the creator meant for them.</p>
<p>Now I have to be frank with you, this difference is pretty much the same for us: for our webscraping needs, we don’t care how the data is formatted on a website (HTML) or whether your tags have special meanings (XML), we only care that they are formatted in tags such that we can extract information (as we’ll see in the XPath chapter).</p>
<p>Before we finish, it’s important to highlight that HTML is much more widely used in webscraping. That is because most of what you webcsraping are websites and HTML in specifically designed to show how a website is formatted. However, the difference will be indistinguishable to you when webscraping from R. You’ll see in the next chapter how everything you need to know about webscraping applies nearly the same for XML as it does for HTML.</p>
<div id="bring-in-xpath-chapter-here-that-way-youll-link-everything-in-here-and-add-exercises." class="section level6">
<h6>
<span class="header-section-number">4.2.0.0.0.1</span> Bring in XPath chapter here? That way you’ll link everything in here and add exercises.<a class="anchor" aria-label="anchor" href="#bring-in-xpath-chapter-here-that-way-youll-link-everything-in-here-and-add-exercises."><i class="fas fa-link"></i></a>
</h6>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="a-primer-on-webscraping.html"><span class="header-section-number">3</span> A primer on Webscraping</a></div>
<div class="next"><a href="what-they-never-taught-you-about-regular-expressions.html"><span class="header-section-number">5</span> What they never taught you about regular expressions</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-formats-for-webscraping"><span class="header-section-number">4</span> Data Formats for Webscraping</a></li>
<li><a class="nav-link" href="#xml"><span class="header-section-number">4.1</span> XML</a></li>
<li><a class="nav-link" href="#html"><span class="header-section-number">4.2</span> HTML</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/cimentadaj/dataharvesting/tree/main/book/blob/main/03-data_formats.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/cimentadaj/dataharvesting/tree/main/book/edit/main/03-data_formats.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Harvesting with R</strong>" was written by Jorge Cimentada. It was last built on 2022-09-26.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
